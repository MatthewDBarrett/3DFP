---
import Layout from '../layouts/Layout.astro';
import { Image } from 'astro:assets';

// Automated asset loading for your portfolio
const images = import.meta.glob('/src/assets/SampleRenders/*.{jpeg,jpg,png,gif,webp}');
---

<Layout title="3D Floor Plans | High-Fidelity Architectural Modeling">
    
	<nav class="fixed w-full z-50 top-0 bg-white/80 backdrop-blur-md border-b border-slate-200">
		<div class="max-w-7xl mx-auto px-6 h-16 flex items-center justify-between">
			<span class="text-lg md:text-xl font-bold tracking-tighter text-slate-800">
				3DFLOORPLANS<span class="text-blue-600">.COM.AU</span>
			</span>
	
			<button id="menu-toggle" class="md:hidden p-2 text-slate-600" aria-label="Toggle Menu">
				<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
				</svg>
			</button>
	
			<div id="nav-links" class="hidden absolute top-16 left-0 w-full bg-white border-b border-slate-200 p-6 flex-col space-y-4 md:static md:flex md:flex-row md:items-center md:space-y-0 md:space-x-8 md:p-0 md:border-none md:bg-transparent md:w-auto">
				<a href="#portfolio" class="text-sm font-medium text-slate-600 hover:text-blue-600 transition-colors">Portfolio</a>
				<a href="#services" class="text-sm font-medium text-slate-600 hover:text-blue-600 transition-colors">Services</a>
				<a href="#contact" class="bg-slate-900 text-white px-5 py-2 rounded-full text-sm font-medium text-center hover:bg-slate-800 transition-all">
					Get a Quote
				</a>
			</div>
		</div>
	</nav>

    <main class="pt-32">
        <section class="max-w-7xl mx-auto px-6 text-center mb-24 text-slate-900">
            <h1 class="text-6xl md:text-7xl font-black tracking-tight mb-8">
                Precision modeling.<br/><span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-500">Immersive visuals.</span>
            </h1>
            <p class="text-lg text-slate-600 max-w-2xl mx-auto mb-10 leading-relaxed">
                Transforming 2D blueprints into photorealistic 3D experiences. We provide architects and real estate agents with the visual edge needed to close deals faster.
            </p>
            <div class="flex flex-col md:flex-row justify-center gap-4">
                <a href="#portfolio" class="px-8 py-4 bg-slate-900 text-white rounded-xl font-bold text-lg shadow-xl shadow-slate-200 hover:-translate-y-1 transition-all text-center">View Our Work</a>
                <a href="#contact" class="px-8 py-4 bg-white text-slate-900 border border-slate-200 rounded-xl font-bold text-lg hover:bg-slate-50 transition-all text-center">Contact Sales</a>
            </div>
        </section>

        <section class="bg-white border-y border-slate-200 py-12 mb-24">
            <div class="max-w-7xl mx-auto px-6 grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
                <div>
                    <p class="text-3xl font-bold text-slate-900">3-4 days</p>
                    <p class="text-sm text-slate-500 uppercase tracking-widest mt-1">Typical Turnaround</p>
                </div>
                <div>
                    <p class="text-3xl font-bold text-slate-900">100%</p>
                    <p class="text-sm text-slate-500 uppercase tracking-widest mt-1">Scale Accuracy*</p>
                </div>
                <div>
                    <p class="text-3xl font-bold text-slate-900">4K</p>
                    <p class="text-sm text-slate-500 uppercase tracking-widest mt-1">Render Quality</p>
                </div>
                <div>
                    <p class="text-3xl font-bold text-slate-900">AU</p>
                    <p class="text-sm text-slate-500 uppercase tracking-widest mt-1">Local Support</p>
                </div>
            </div>
        </section>

        <section id="portfolio" class="max-w-7xl mx-auto px-6 mb-32">
            <div class="flex justify-between items-end mb-12">
                <div>
                    <h2 class="text-4xl font-bold text-slate-900 tracking-tight">Featured Renders</h2>
                    <p class="text-slate-500 mt-2 text-lg">A showcase of our recent architectural visualizations.</p>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                {Object.entries(images).map(([path, importImage]) => (
                  <div class="relative group overflow-hidden rounded-2xl bg-slate-200 aspect-[16/10] shadow-lg">
                    <Image 
                      src={importImage()} 
                      alt="3D Floor Plan Render" 
                      class="object-cover w-full h-full transition-transform duration-700 group-hover:scale-110"
                    />
                    <div class="absolute inset-0 bg-slate-900/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                      <span class="text-white font-bold border-2 border-white px-6 py-2 rounded-full transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300">
                        Enlarge View
                      </span>
                    </div>
                  </div>
                ))}
            </div>
        </section>

        <section id="contact" class="max-w-4xl mx-auto px-6 mb-32 text-slate-900">
            <div class="bg-blue-600 rounded-[2rem] p-12 text-center text-white relative overflow-hidden">
                <div class="absolute top-0 right-0 -translate-y-1/2 translate-x-1/2 w-64 h-64 bg-white/10 rounded-full blur-3xl"></div>
                
                <div id="form-container">
                    <h2 class="text-4xl font-bold mb-4">Request a 3D Floor Plan</h2>
                    <p class="text-blue-100 mb-10 text-lg">Upload your 2D blueprints, and I'll send you a quote within 24 hours.</p>
    
                    <form id="contact-form" class="grid grid-cols-1 md:grid-cols-2 gap-4 text-left">
                        <div class="space-y-2">
                            <label class="text-sm font-medium ml-1 text-white">First Name</label>
                            <input type="text" name="fi-sender-firstName" required class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder:text-blue-200 focus:outline-none" placeholder="John">
                        </div>
                        <div class="space-y-2">
                            <label class="text-sm font-medium ml-1 text-white">Last Name</label>
                            <input type="text" name="fi-sender-lastName" required class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder:text-blue-200 focus:outline-none" placeholder="Citizen">
                        </div>
                        <div class="md:col-span-2 space-y-2">
                            <label class="text-sm font-medium ml-1 text-white">Email Address</label>
                            <input type="email" name="fi-sender-email" required class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder:text-blue-200 focus:outline-none" placeholder="john@example.com">
                        </div>
                        
                        <div class="md:col-span-2 space-y-2">
                            <label class="text-sm font-medium ml-1 text-white">Upload Blueprints (PDF, JPG, PNG)</label>
                            <input type="file" name="fi-file-blueprints" accept=".pdf,.jpg,.jpeg,.png" required class="w-full px-4 py-3 rounded-xl bg-white/5 border border-dashed border-white/30 text-white text-sm cursor-pointer file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-white file:text-blue-600" />
                        </div>
                        <div class="md:col-span-2 space-y-2">
                            <label class="text-sm font-medium ml-1 text-white">Project Details</label>
                            <textarea name="fi-text-message" rows="4" class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder:text-blue-200 focus:outline-none" placeholder="e.g. 3-bedroom apartment in Sydney..."></textarea>
                        </div>

                        <div id="form-status" class="md:col-span-2 hidden p-4 rounded-xl font-bold text-center text-xs"></div>
                        
                        <button type="submit" id="submit-btn" class="md:col-span-2 mt-4 bg-white text-blue-600 py-4 rounded-xl font-bold text-lg hover:bg-blue-50 transition-all active:scale-95 shadow-lg">
                            Send Request
                        </button>
                    </form>
                </div>

                <div id="success-container" class="hidden py-12">
                    <div class="w-20 h-20 bg-white/20 text-white rounded-full flex items-center justify-center mx-auto mb-6 text-3xl">âœ“</div>
                    <h2 class="text-4xl font-bold mb-4">Request Received!</h2>
                    <p class="text-blue-100 mb-10 text-lg leading-relaxed">
                        Our local team will review your request and get back to you shortly.
                    </p>
                    <button id="reset-btn" class="bg-white text-blue-600 px-8 py-3 rounded-xl font-bold hover:bg-blue-50 transition shadow-lg">
                        Start a New Request
                    </button>
                </div>
            </div>
        </section>
    </main>

    <section class="max-w-7xl mx-auto px-6 py-8 border-t border-slate-100">
        <div class="space-y-2 text-slate-400 text-xs italic">
            <p>Service Availability: Currently accepting inquiries for residential and commercial 3D modeling projects across Australia.</p>
            <p>* Render Accuracy: All 3D floor plans are modeled to scale based on provided 2D plans.</p>
        </div>
    </section>

    <footer class="bg-slate-900 text-slate-400 py-10 px-6 border-t border-slate-800">
        <div class="max-w-7xl mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-center gap-4 text-sm tracking-wide">
                <p>Â© 2026 3DFloorPlans.com.au. All rights reserved.</p>
                <div class="flex items-center gap-4">
                    <span class="text-slate-600">ðŸ‡¦ðŸ‡º 100% Australian Owned</span>
                    <p class="font-mono text-slate-500">ABN: 40893892472</p>
                </div>
            </div>
        </div>
    </footer>
</Layout>

<script src="https://forminit.com/sdk/v1/forminit.js"></script>

<script is:inline>
    window.addEventListener('load', () => {
      if (typeof Forminit === 'undefined') {
        console.error("Forminit SDK failed to load.");
        return;
      }
  
      const forminit = new Forminit();
      const FORM_ID = 'd0isg9sqemt'; //
      
      const form = document.getElementById('contact-form');
      const btn = document.getElementById('submit-btn');
      const status = document.getElementById('form-status');
      const formContainer = document.getElementById('form-container');
      const successContainer = document.getElementById('success-container');
      const resetBtn = document.getElementById('reset-btn');
  
      form.addEventListener('submit', async function(event) {
        event.preventDefault(); 
        
        btn.disabled = true;
        btn.innerText = "Uploading Blueprints...";
        status.classList.add('hidden');
        
        const formData = new FormData(form);
  
        try {
          const { data, error } = await forminit.submit(FORM_ID, formData); //
          
          if (error) {
            console.error("Forminit API Error:", error);
            status.textContent = error.message; //
            status.classList.remove('hidden');
            status.classList.add('bg-red-500/20', 'text-red-100');
            btn.disabled = false;
            btn.innerText = "Send Request";
            return;
          }
          
          console.log("Success! Hash:", data.hashId); //
          formContainer.classList.add('hidden');
          successContainer.classList.remove('hidden');
          form.reset(); 
  
        } catch (err) {
          console.error("SDK Execution Error:", err);
          status.textContent = "Connection failed. Please try again.";
          status.classList.remove('hidden');
          btn.disabled = false;
          btn.innerText = "Send Request";
        }
      });

      // Reset Button Logic
      resetBtn.addEventListener('click', () => {
        successContainer.classList.add('hidden');
        formContainer.classList.remove('hidden');
        btn.disabled = false;
        btn.innerText = "Send Request";
      });
    });

		// Simple toggle for the mobile navigation
	const menuToggle = document.getElementById('menu-toggle');
	const navLinks = document.getElementById('nav-links');

	if (menuToggle && navLinks) {
		menuToggle.addEventListener('click', () => {
			navLinks.classList.toggle('hidden');
			navLinks.classList.toggle('flex');
		});

		// Close menu when a link is clicked (useful for one-page sites)
		navLinks.querySelectorAll('a').forEach(link => {
			link.addEventListener('click', () => {
				if (window.innerWidth < 768) {
					navLinks.classList.add('hidden');
				}
			});
		});
	}
</script>